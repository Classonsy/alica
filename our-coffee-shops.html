<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>СОВА - Наши кофейни</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="modal.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="our-coffee-shops.css">
    <script src="https://api-maps.yandex.ru/2.1/?apikey=ваш_API_ключ&lang=ru_RU" type="text/javascript"></script>
</head>
<body>
    <header>
        <div class="container header-container">
            <div class="logo">
                <div class="coffee-bean-icon"></div>
                <h1>СОВА</h1>
            </div>
            <nav>
                <ul>
                    <li><a href="menu.html">МЕНЮ КОФЕЙНИ</a></li>
                    <li><a href="our-coffee-shops.html">НАШИ КОФЕЙНИ</a></li>
                    <li><a href="contacts.html">КОНТАКТЫ</a></li>
                    <li><a href="news.html">НОВОСТИ</a></li>
                    <li><a href="franchise.html">ФРАНШИЗА</a></li>
                    <li><a href="work-with-us.html">ВАКАНСИИ</a></li>
                </ul>
            </nav>
            <div class="icons">
                <a href="#" class="icon cart"><span class="cart-counter"></span></a>
                <a href="#" class="icon user"></a>
            </div>
        </div>
    </header>

    <main class="coffee-shops-main">
        <div class="map-container">
            <div id="map" class="map"></div>
            <div class="yandex-link">
                <a href="https://yandex.ru/maps" target="_blank">Открыть в Яндекс.Картах</a>
            </div>
        </div>
        
        <div class="sidebar">
            <h2>Наши кофейни</h2>
            <p>Выберите город, улицу</p>
            
            <div class="search-bar">
                <input type="text" id="shop-search" placeholder="Поиск">
            </div>
            
            <div class="coffee-shops-list">
                <div class="coffee-shop-item" data-coords="[55.751244, 37.618423]">
                    <h3>Арбат, 18с1</h3>
                    <div class="shop-info">
                        <div class="shop-phone">
                            <span class="icon-mini phone-icon"></span>
                            <span>+7 (800) 555-19-66</span>
                        </div>
                        <div class="shop-hours">
                            <span class="icon-mini clock-icon"></span>
                            <div class="hours">
                                <div>Пн-Пт: 08:00-21:50</div>
                                <div>Сб-Вс: 09:00-21:50</div>
                            </div>
                        </div>
                        <div class="shop-metro">
                            <span class="metro-icon blue"></span>
                            <span>АРБАТСКАЯ</span>
                        </div>
                    </div>
                </div>
                
                <div class="coffee-shop-item" data-coords="[55.789072, 37.703619]">
                    <h3>ЧИСТЯКОВСКАЯ, 69</h3>
                    <div class="shop-info">
                        <div class="shop-phone">
                            <span class="icon-mini phone-icon"></span>
                            <span>+7 (800) 555-19-66</span>
                        </div>
                        <div class="shop-hours">
                            <span class="icon-mini clock-icon"></span>
                            <div class="hours">
                                <div>Пн-Пт: 08:00-20:00</div>
                                <div>Сб-Вс: выходной</div>
                            </div>
                        </div>
                        <div class="shop-metro">
                            <span class="metro-icon blue"></span>
                            <span>ЭЛЕКТРОЗАВОДСКАЯ</span>
                        </div>
                    </div>
                </div>
                
                <div class="coffee-shop-item" data-coords="[59.907264, 30.299060]">
                    <h3>Балтийская, 7</h3>
                    <div class="shop-info">
                        <div class="shop-phone">
                            <span class="icon-mini phone-icon"></span>
                            <span>+7 (800) 555-19-66</span>
                        </div>
                        <div class="shop-hours">
                            <span class="icon-mini clock-icon"></span>
                            <div class="hours">
                                <div>Пн-Пт: 08:00-21:00</div>
                                <div>Сб-Вс: 09:00-21:00</div>
                            </div>
                        </div>
                        <div class="shop-metro">
                            <span class="metro-icon red"></span>
                            <span>БАЛТИЙСКАЯ</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    
    <!-- Модальное окно корзины -->
    <div class="modal" id="cart-modal">
        <div class="modal-content cart-modal-content">
            <div class="modal-close"></div>
            <h2>Корзина</h2>
            
            <div class="cart-items-container" id="cart-items">
                <!-- Здесь будут отображаться товары в корзине -->
            </div>
            
            <div class="cart-summary">
                <div class="cart-total">
                    <span>Итого:</span>
                    <span id="cart-total-price">0 ₽</span>
                </div>
                <button id="checkout-button" class="checkout-button">Оформить заказ</button>
            </div>
        </div>
    </div>
    
    <!-- Модальное окно авторизации -->
    <div class="modal" id="auth-modal">
        <div class="modal-content auth-modal-content">
            <div class="modal-close"></div>
            
            <!-- Форма входа -->
            <div id="login-form-container">
                <h2>Вход в аккаунт</h2>
                
                <form id="login-form">
                    <div class="form-group">
                        <label for="login-email">Email</label>
                        <input type="email" id="login-email" name="email" class="form-control" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="login-password">Пароль</label>
                        <input type="password" id="login-password" name="password" class="form-control" required>
                    </div>
                    
                    <div class="error-message" id="login-error"></div>
                    
                    <button type="submit" class="form-submit">Войти</button>
                </form>
                
                <div class="auth-switch">
                    <p>Нет аккаунта? <a href="#" class="switch-to-register">Зарегистрироваться</a></p>
                </div>
            </div>
            
            <!-- Форма регистрации -->
            <div id="register-form-container" style="display: none;">
                <h2>Регистрация</h2>
                
                <form id="register-form">
                    <div class="form-group">
                        <label for="register-email">Email*</label>
                        <input type="email" id="register-email" name="email" class="form-control" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="register-password">Пароль*</label>
                        <input type="password" id="register-password" name="password" class="form-control" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="register-confirm-password">Подтверждение пароля*</label>
                        <input type="password" id="register-confirm-password" name="confirm-password" class="form-control" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="register-first-name">Имя</label>
                        <input type="text" id="register-first-name" name="first-name" class="form-control">
                    </div>
                    
                    <div class="form-group">
                        <label for="register-last-name">Фамилия</label>
                        <input type="text" id="register-last-name" name="last-name" class="form-control">
                    </div>
                    
                    <div class="form-group">
                        <label for="register-phone">Телефон</label>
                        <input type="tel" id="register-phone" name="phone" class="form-control">
                    </div>
                    
                    <div class="error-message" id="register-error"></div>
                    
                    <button type="submit" class="form-submit">Зарегистрироваться</button>
                </form>
                
                <div class="auth-switch">
                    <p>Уже есть аккаунт? <a href="#" class="switch-to-login">Войти</a></p>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <div class="container footer-container">
            <div class="footer-links">
                <a href="our-coffee-shops.html">Кофейни</a>
                <a href="contacts.html">Контакты</a>
            </div>
            <div class="footer-contact">
                8 800 555 19 66
            </div>
        </div>
    </footer>
    
    <script src="script.js"></script>
    <script src="auth.js"></script>
    <script src="cart.js"></script>
    <script>
        // Инициализация Яндекс.Карт
        ymaps.ready(init);
        
        function init() {
            // Создание карты
            var myMap = new ymaps.Map("map", {
                center: [55.76, 37.64], // Москва
                zoom: 11,
                controls: ['zoomControl', 'geolocationControl']
            });
            
            // Создание коллекции меток
            var myCollection = new ymaps.GeoObjectCollection();
            
            // Добавление меток из списка кофеен
            var coffeeShops = document.querySelectorAll('.coffee-shop-item');
            coffeeShops.forEach(function(shop) {
                var coords = JSON.parse(shop.dataset.coords);
                var shopName = shop.querySelector('h3').textContent;
                
                var placemark = new ymaps.Placemark(coords, {
                    balloonContentHeader: shopName,
                    balloonContentBody: createBalloonContent(shop)
                }, {
                    preset: 'islands#greenCoffeeIcon'
                });
                
                myCollection.add(placemark);
                
                // Добавляем обработчик клика на элемент списка
                shop.addEventListener('click', function() {
                    myMap.setCenter(coords, 16);
                    placemark.balloon.open();
                });
            });
            
            // Добавление коллекции на карту
            myMap.geoObjects.add(myCollection);
            
            // Подгоняем масштаб карты под все метки
            myMap.setBounds(myCollection.getBounds(), {
                checkZoomRange: true,
                zoomMargin: 30
            });
            
            // Поиск по кофейням
            var searchInput = document.getElementById('shop-search');
            if (searchInput) {
                searchInput.addEventListener('input', function() {
                    var searchText = this.value.toLowerCase();
                    
                    coffeeShops.forEach(function(shop) {
                        var shopName = shop.querySelector('h3').textContent.toLowerCase();
                        var shopMetro = shop.querySelector('.shop-metro span:last-child');
                        var metroText = shopMetro ? shopMetro.textContent.toLowerCase() : '';
                        
                        if (shopName.includes(searchText) || metroText.includes(searchText)) {
                            shop.style.display = 'block';
                        } else {
                            shop.style.display = 'none';
                        }
                    });
                });
            }
        }
        
        // Функция для создания содержимого балуна
        function createBalloonContent(shop) {
            var phone = shop.querySelector('.shop-phone span:last-child').textContent;
            var hours = shop.querySelector('.shop-hours .hours').innerHTML;
            var metro = shop.querySelector('.shop-metro span:last-child');
            var metroText = metro ? metro.textContent : '';
            
            return '<div class="balloon-content">' +
                   '<p><strong>Телефон:</strong> ' + phone + '</p>' +
                   '<p><strong>Режим работы:</strong><br>' + hours + '</p>' +
                   (metroText ? '<p><strong>Метро:</strong> ' + metroText + '</p>' : '') +
                   '</div>';
        }
    </script>
</body>
</html> 